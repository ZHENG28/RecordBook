<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>
<body>
	<div id="container">

	</div>

<script>
	$(function () {
		$.ajax({
			url: "/queryTotalClass",
			type: "Get",
			contentType: "application/json;charset=UTF-8",
			success: function (response) {
				response.data.forEach(function (cclass) {
					$('#container').append("<p><a class='classDetail' href='#'>" + cclass+ "</a></p>")
					$('.classDetail').click(function (e) {
						let className = $(this).text()
						$("#container").html("")
						$.ajax({
							url:"/queryClassStudent",
							data: {
								"className": className
							},
							type: 'GET',
							contentType: "application/json;charset=UTF-8",
							success: function (response) {
								//stringify()用于从一个对象解析出字符串
								let jsonData = JSON.stringify(response);
								jQuery.each(JSON.parse(jsonData), function(i,student){
									$('#container').append("<p><a class='studentDetail' href='#'>" + student.name + "</a></p>")
								})
							},
							error: function () {
								console.log('学生名单加载失败!')
							}
						})
					})
				})
			},
			error: function (response) {
				console.log("加载班级失败")
			},
		})

	})
	</script>
</body>
</html>