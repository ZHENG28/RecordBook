<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>立项</title>
</head>
<body>
<div class="card mb-4 w-100">
    <div class="card-header">
        <h1>你的立项情况</h1>
        <button type="button" class="btn btn-outline-primary" onclick="addInput()">+</button>
        <button type="button" class="btn btn-outline-success" onclick="getValue()">提交</button>
    </div>
    <div id="project-input">
        <div class="input-group input-group-lg mb-3">
            <div class="input-group-prepend selectgroups">
                <button id="rank" class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">请选择立项等级
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">院级</a>
                    <a class="dropdown-item" href="#">校级</a>
                    <a class="dropdown-item" href="#">省级</a>
                    <a class="dropdown-item" href="#">国家级</a>
                </div>
            </div>
            <div class="input-group-prepend selectgroups">
                <button id="time" class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">请选择立项时间
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">2021</a>
                    <a class="dropdown-item" href="#">2020</a>
                    <a class="dropdown-item" href="#">2019</a>
                    <a class="dropdown-item" href="#">2018</a>
                </div>
            </div>
            <input name="project[]" type="text" class="form-control" placeholder="项目名称" aria-label="projectName" aria-describedby="basic-remove-btn">
            <div class="input-group-append">
                <button type="button" class="removeclass btn btn-outline-danger">移除</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function addInput() {
        let input = $("        <div class=\"input-group input-group-lg mb-3\">\n" +
            "            <div class=\"input-group-prepend selectgroups\">\n" +
            "                <button id=\"rank\" class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n" +
            "                        aria-expanded=\"false\">请选择立项等级\n" +
            "                </button>\n" +
            "                <div class=\"dropdown-menu\">\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">院级</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">校级</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">省级</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">国家级</a>\n" +
            "                </div>\n" +
            "            </div>\n" +
            "            <div class=\"input-group-prepend selectgroups\">\n" +
            "                <button id=\"time\" class=\"btn btn-outline-secondary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\n" +
            "                        aria-expanded=\"false\">请选择立项时间\n" +
            "                </button>\n" +
            "                <div class=\"dropdown-menu\">\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">2021</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">2020</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">2019</a>\n" +
            "                    <a class=\"dropdown-item\" href=\"#\">2018</a>\n" +
            "                </div>\n" +
            "            </div>\n" +
            "            <input name=\"project[]\" type=\"text\" class=\"form-control\" placeholder=\"项目名称\" aria-label=\"projectName\" aria-describedby=\"basic-remove-btn\">\n" +
            "            <div class=\"input-group-append\">\n" +
            "                <button type=\"button\" class=\"removeclass btn btn-outline-danger\">移除</button>\n" +
            "            </div>\n" +
            "        </div>");
        $("#project-input").append(input);
    }

    function saveProjects() {
        console.log("hello");
    }

    function getValue() {
        let valArr = new Array;
        $("input[name='project[]']").each(function (index, item) {
            valArr[index] = $(this).val();
            let priv = valArr.join(',');
        });
        console.log(valArr);
    }


    $("body").on("click", ".removeclass", function (e) {
        $(this).parent('div').parent('div').remove();
        return false;
    });

    $('.dropdown-menu a').on('click', function(e){
        console.log($(this).text());
        // console.log(e.currentTarget.innerText);
    });

</script>
</body>
</html>